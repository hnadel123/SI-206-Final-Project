# Weathering the Wait Time Project
# SI 206 Final Project
# Authors: Nadia Reddin, Hannah Nadel

import requests
import time
from datetime import datetime
import matplotlib.pyplot as plt

def fetch_disneyland_data(timestamp):
    url = 'https://queue-times.com/parks/16/queue_times.json'
    response = requests.get(url)
    data = response.json()

    ride_data = []

    for land in data['lands']:
        for ride in land['rides'][:25]: 
            ride_info = {
                'ride_name': ride['name'],
                'wait_time': ride['wait_time'],
                'ride_status': ride.get('status', 'Unknown'),
                'ride_type': ride.get('type', 'Unknown'),
                'timestamp': timestamp
            }
            ride_data.append(ride_info)
    
    return ride_data

